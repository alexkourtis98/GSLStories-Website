<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="" name="description">
    <meta content="Alexandros Kourtis" name="author">
    <link href="./img/GSL%20Logo.png" rel="icon" type="image/x-icon">

    <title>GSL Stories Video</title>
    <meta content="#0275d8" name="theme-color">

    <link href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" rel="stylesheet"/>
    <link href="./css/style.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        #headerulcontainer {
            display: block !important;
        }

        h1 {
            font-size: 24px;
            font-weight: 400;
            text-align: center;
        }

        #socials a {
            text-decoration: none;
            font-size: 25px;
            padding-left: 4px;
            padding-top: 10px;
        }

        @media only screen and (max-width: 600px) {
            #joinus {
                display: none !important;
            }

            #headerul {
                text-align: center !important;
                width: 100vw;
                padding: 0;
            }
        }
    </style>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-117Y4FD2GM');
    </script>
</head>

<div id="headerasda"
     style="background-color: var(--blue); position: relative !important; top: 0; width: 100%; height: 60px">
    <div id="headerulcontainer"
         style="justify-content: center; display: inline-block; align-items: center; position: absolute;top: 0; width: 100%; ">
        <div style="width: auto; float: left; ">
            <ul id="headerul"
            >
                <li><a href="./stories.html">Ιστορίες</a></li>
            </ul>
        </div>
        <div id="joinus" style="width: auto; float: right; ">
            <div id="socials">
                <a class="fa fa-facebook" href="https://www.facebook.com/GSLStories/" target="_blank"></a>
                <a class="fa fa-twitter" href="https://twitter.com/GslStories" target="_blank"></a>
                <a class="fa fa-instagram" href="https://www.instagram.com/gslstories/" target="_blank"></a>
                <a class="fa fa-youtube" href="https://www.youtube.com/channel/UC8gobh_lKDrry6Ai2yn5Gzg"
                   target="_blank"></a>
            </div>
        </div>
    </div>
</div>

<body>
<main>
    <div style="width: 100vw; min-height: 100vh; display: block;">
        <div id="videohere" style="width: 71vw;
height: 100vh; display: block; float: left">

        </div>
        <div id="transcript" style="width: 29vw;
        padding: 10px;
height: 100vh; overflow-y: scroll; display: block; float: right">
            <h2 id="titlehere" style="word-break: break-word;"></h2>
            <p id="content" style="word-break: break-word;"></p>
        </div>
    </div>
</main>

<script crossorigin="anonymous"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        referrerpolicy="no-referrer"
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE"
        src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js"></script>
<script>
    async function getarticle() {
        const urlParams = new URLSearchParams(window.location.search);
        const slug = urlParams.get('slug');
        let params = "video/slug/" + slug;
        await getRequest(params);
    }

    async function getRequest(params) {
        try {
            const options = {
                headers: {
                    'xapikey': localStorage.getItem('secret')
                }
            }
            const response = await fetch('https://gslapifastapi.herokuapp.com/' + params, options);
            const data = await response.json();

            document.title = data.title;
            document.getElementById("videohere").innerHTML = "<video controlsList=\"nodownload nofullscreen noremoteplayback\" onload='this.play()' muted  style='object-fit: cover; width: 100%; height: 100%' controls Autoplay=autoplay>\n" +
                "  <source src=" + data.url + " type='video/mp4'>\n" +
                "</video>";
            document.getElementById("titlehere").innerText = data.title;
            document.getElementById("content").innerText = data.transcript;
        } catch (error) {
            console.log(error);
        }
    }

    async function init() {
        await getarticle();
    }

    init();
</script>
</body>

</html>
